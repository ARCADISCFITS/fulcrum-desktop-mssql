'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _pgFormat = require('pg-format');

var _pgFormat2 = _interopRequireDefault(_pgFormat);

var _fulcrumDesktopPlugin = require('fulcrum-desktop-plugin');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

class MSSQLRecordValues extends _fulcrumDesktopPlugin.RecordValues {
  static setupSearch(values, feature) {
    const searchableValue = feature.searchableValue;

    values.record_index_text = searchableValue;
    values.record_index = searchableValue; //{raw: `to_tsvector(${ pgformat('%L', searchableValue) })`};

    return values;
  }

  static setupPoint(values, latitude, longitude) {
    const wkt = (0, _pgFormat2.default)('POINT(%s %s)', longitude, latitude);
    return { raw: `geography::STGeomFromText('${wkt}', 4326)` };
  }
}
exports.default = MSSQLRecordValues;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL21zc3FsLXJlY29yZC12YWx1ZXMuanMiXSwibmFtZXMiOlsiTVNTUUxSZWNvcmRWYWx1ZXMiLCJzZXR1cFNlYXJjaCIsInZhbHVlcyIsImZlYXR1cmUiLCJzZWFyY2hhYmxlVmFsdWUiLCJyZWNvcmRfaW5kZXhfdGV4dCIsInJlY29yZF9pbmRleCIsInNldHVwUG9pbnQiLCJsYXRpdHVkZSIsImxvbmdpdHVkZSIsIndrdCIsInJhdyJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7Ozs7QUFDQTs7OztBQUVlLE1BQU1BLGlCQUFOLDRDQUE2QztBQUMxRCxTQUFPQyxXQUFQLENBQW1CQyxNQUFuQixFQUEyQkMsT0FBM0IsRUFBb0M7QUFDbEMsVUFBTUMsa0JBQWtCRCxRQUFRQyxlQUFoQzs7QUFFQUYsV0FBT0csaUJBQVAsR0FBMkJELGVBQTNCO0FBQ0FGLFdBQU9JLFlBQVAsR0FBc0JGLGVBQXRCLENBSmtDLENBSUs7O0FBRXZDLFdBQU9GLE1BQVA7QUFDRDs7QUFFRCxTQUFPSyxVQUFQLENBQWtCTCxNQUFsQixFQUEwQk0sUUFBMUIsRUFBb0NDLFNBQXBDLEVBQStDO0FBQzdDLFVBQU1DLE1BQU0sd0JBQVMsY0FBVCxFQUF5QkQsU0FBekIsRUFBb0NELFFBQXBDLENBQVo7QUFDQSxXQUFPLEVBQUNHLEtBQU0sOEJBQThCRCxHQUFLLFVBQTFDLEVBQVA7QUFDRDtBQWJ5RDtrQkFBdkNWLGlCIiwiZmlsZSI6Im1zc3FsLXJlY29yZC12YWx1ZXMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgcGdmb3JtYXQgZnJvbSAncGctZm9ybWF0JztcbmltcG9ydCB7IFJlY29yZFZhbHVlcyB9IGZyb20gJ2Z1bGNydW0nO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNU1NRTFJlY29yZFZhbHVlcyBleHRlbmRzIFJlY29yZFZhbHVlcyB7XG4gIHN0YXRpYyBzZXR1cFNlYXJjaCh2YWx1ZXMsIGZlYXR1cmUpIHtcbiAgICBjb25zdCBzZWFyY2hhYmxlVmFsdWUgPSBmZWF0dXJlLnNlYXJjaGFibGVWYWx1ZTtcblxuICAgIHZhbHVlcy5yZWNvcmRfaW5kZXhfdGV4dCA9IHNlYXJjaGFibGVWYWx1ZTtcbiAgICB2YWx1ZXMucmVjb3JkX2luZGV4ID0gc2VhcmNoYWJsZVZhbHVlOyAvL3tyYXc6IGB0b190c3ZlY3RvcigkeyBwZ2Zvcm1hdCgnJUwnLCBzZWFyY2hhYmxlVmFsdWUpIH0pYH07XG5cbiAgICByZXR1cm4gdmFsdWVzO1xuICB9XG5cbiAgc3RhdGljIHNldHVwUG9pbnQodmFsdWVzLCBsYXRpdHVkZSwgbG9uZ2l0dWRlKSB7XG4gICAgY29uc3Qgd2t0ID0gcGdmb3JtYXQoJ1BPSU5UKCVzICVzKScsIGxvbmdpdHVkZSwgbGF0aXR1ZGUpO1xuICAgIHJldHVybiB7cmF3OiBgZ2VvZ3JhcGh5OjpTVEdlb21Gcm9tVGV4dCgnJHsgd2t0IH0nLCA0MzI2KWB9O1xuICB9XG59XG5cbiJdfQ==