'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _util = require('util');

var _fulcrumDesktopPlugin = require('fulcrum-desktop-plugin');

class MSSQLRecordValues extends _fulcrumDesktopPlugin.RecordValues {
  static setupSearch(values, feature) {
    const searchableValue = feature.searchableValue;

    values.record_index_text = searchableValue;
    values.record_index = searchableValue; //{raw: `to_tsvector(${ pgformat('%L', searchableValue) })`};

    return values;
  }

  static setupPoint(values, latitude, longitude) {
    const wkt = (0, _util.format)('POINT(%s %s)', longitude, latitude);
    return { raw: `geography::STGeomFromText('${wkt}', 4326)` };
  }
}
exports.default = MSSQLRecordValues;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL21zc3FsLXJlY29yZC12YWx1ZXMuanMiXSwibmFtZXMiOlsiTVNTUUxSZWNvcmRWYWx1ZXMiLCJzZXR1cFNlYXJjaCIsInZhbHVlcyIsImZlYXR1cmUiLCJzZWFyY2hhYmxlVmFsdWUiLCJyZWNvcmRfaW5kZXhfdGV4dCIsInJlY29yZF9pbmRleCIsInNldHVwUG9pbnQiLCJsYXRpdHVkZSIsImxvbmdpdHVkZSIsIndrdCIsInJhdyJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7O0FBQ0E7O0FBRWUsTUFBTUEsaUJBQU4sNENBQTZDO0FBQzFELFNBQU9DLFdBQVAsQ0FBbUJDLE1BQW5CLEVBQTJCQyxPQUEzQixFQUFvQztBQUNsQyxVQUFNQyxrQkFBa0JELFFBQVFDLGVBQWhDOztBQUVBRixXQUFPRyxpQkFBUCxHQUEyQkQsZUFBM0I7QUFDQUYsV0FBT0ksWUFBUCxHQUFzQkYsZUFBdEIsQ0FKa0MsQ0FJSzs7QUFFdkMsV0FBT0YsTUFBUDtBQUNEOztBQUVELFNBQU9LLFVBQVAsQ0FBa0JMLE1BQWxCLEVBQTBCTSxRQUExQixFQUFvQ0MsU0FBcEMsRUFBK0M7QUFDN0MsVUFBTUMsTUFBTSxrQkFBTyxjQUFQLEVBQXVCRCxTQUF2QixFQUFrQ0QsUUFBbEMsQ0FBWjtBQUNBLFdBQU8sRUFBQ0csS0FBTSw4QkFBOEJELEdBQUssVUFBMUMsRUFBUDtBQUNEO0FBYnlEO2tCQUF2Q1YsaUIiLCJmaWxlIjoibXNzcWwtcmVjb3JkLXZhbHVlcy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGZvcm1hdCB9IGZyb20gJ3V0aWwnO1xuaW1wb3J0IHsgUmVjb3JkVmFsdWVzIH0gZnJvbSAnZnVsY3J1bSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1TU1FMUmVjb3JkVmFsdWVzIGV4dGVuZHMgUmVjb3JkVmFsdWVzIHtcbiAgc3RhdGljIHNldHVwU2VhcmNoKHZhbHVlcywgZmVhdHVyZSkge1xuICAgIGNvbnN0IHNlYXJjaGFibGVWYWx1ZSA9IGZlYXR1cmUuc2VhcmNoYWJsZVZhbHVlO1xuXG4gICAgdmFsdWVzLnJlY29yZF9pbmRleF90ZXh0ID0gc2VhcmNoYWJsZVZhbHVlO1xuICAgIHZhbHVlcy5yZWNvcmRfaW5kZXggPSBzZWFyY2hhYmxlVmFsdWU7IC8ve3JhdzogYHRvX3RzdmVjdG9yKCR7IHBnZm9ybWF0KCclTCcsIHNlYXJjaGFibGVWYWx1ZSkgfSlgfTtcblxuICAgIHJldHVybiB2YWx1ZXM7XG4gIH1cblxuICBzdGF0aWMgc2V0dXBQb2ludCh2YWx1ZXMsIGxhdGl0dWRlLCBsb25naXR1ZGUpIHtcbiAgICBjb25zdCB3a3QgPSBmb3JtYXQoJ1BPSU5UKCVzICVzKScsIGxvbmdpdHVkZSwgbGF0aXR1ZGUpO1xuICAgIHJldHVybiB7cmF3OiBgZ2VvZ3JhcGh5OjpTVEdlb21Gcm9tVGV4dCgnJHsgd2t0IH0nLCA0MzI2KWB9O1xuICB9XG59XG5cbiJdfQ==